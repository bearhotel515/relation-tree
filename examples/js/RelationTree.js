!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.RelationTree=e():t.RelationTree=e()}(this,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=87)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){t.exports=!n(9)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var i=n(8),r=n(37),o=n(29),s=Object.defineProperty;e.f=n(1)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(21)("wks"),r=n(17),o=n(0).Symbol,s="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=i},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},function(t,e,n){var i=n(0),r=n(14),o=n(7),s=n(12),a=n(57),c=function(t,e,n){var u,l,h,f,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,m=t&c.B,g=d?i:v?i[e]||(i[e]={}):(i[e]||{}).prototype,b=d?r:r[e]||(r[e]={}),x=b.prototype||(b.prototype={});for(u in d&&(n=e),n)h=((l=!p&&g&&void 0!==g[u])?g:n)[u],f=m&&l?a(h,i):y&&"function"==typeof h?a(Function.call,h):h,g&&s(g,u,h,t&c.U),b[u]!=h&&o(b,u,f),y&&x[u]!=h&&(x[u]=h)};i.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var i=n(3),r=n(16);t.exports=n(1)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(15);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(40),r=n(41);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(0),r=n(7),o=n(10),s=n(17)("src"),a=n(56),c=(""+a).split("toString");n(14).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(u&&(o(n,s)||r(n,s,t[e]?""+t[e]:c.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[s]||a.call(this)}))},function(t,e,n){var i=n(45),r=n(33);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e){var n=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(41);t.exports=function(t){return Object(i(t))}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){"use strict";var i=n(6),r=n(39)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(31)("includes")},function(t,e,n){var i=n(14),r=n(0),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(22)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!1},function(t,e,n){var i=n(6);i(i.S+i.F,"Object",{assign:n(59)})},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(60),r=n(19);t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?r(t):e}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var i=n(61);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}},function(t,e,n){var i=n(15);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(4)("unscopables"),r=Array.prototype;null==r[i]&&n(7)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){var i=n(21)("keys"),r=n(17);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(45),r=n(33).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(3).f,r=n(10),o=n(4)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e){t.exports={}},function(t,e,n){t.exports=!n(1)&&!n(9)((function(){return 7!=Object.defineProperty(n(38)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var i=n(15),r=n(0).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(11),r=n(42),o=n(44);t.exports=function(t){return function(e,n,s){var a,c=i(e),u=r(c.length),l=o(s,u);if(t&&n!=n){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var i=n(30);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(43),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(43),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(10),r=n(11),o=n(39)(!1),s=n(32)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),c=0,u=[];for(n in a)n!=s&&i(a,n)&&u.push(n);for(;e.length>c;)i(a,n=e[c++])&&(~o(u,n)||u.push(n));return u}},function(t,e,n){var i=n(25),r=n(16),o=n(11),s=n(29),a=n(10),c=n(37),u=Object.getOwnPropertyDescriptor;e.f=n(1)?u:function(t,e){if(t=o(t),e=s(e,!0),c)try{return u(t,e)}catch(t){}if(a(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){e.f=n(4)},function(t,e,n){var i=n(8),r=n(70),o=n(33),s=n(32)("IE_PROTO"),a=function(){},c=function(){var t,e=n(38)("iframe"),i=o.length;for(e.style.display="none",n(71).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;i--;)delete c.prototype[o[i]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[s]=t):n=c(),void 0===e?n:r(n,e)}},function(t,e,n){"use strict";var i=n(31),r=n(75),o=n(36),s=n(11);t.exports=n(76)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";var i=n(8);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var i=n(53),r=n(54),o=n(55);t.exports=function(t,e){return i(t)||r(t,e)||o()}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){t.exports=n(21)("native-function-to-string",Function.toString)},function(t,e,n){var i=n(58);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var i=n(1),r=n(13),o=n(24),s=n(25),a=n(18),c=n(40),u=Object.assign;t.exports=!u||n(9)((function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i}))?function(t,e){for(var n=a(t),u=arguments.length,l=1,h=o.f,f=s.f;u>l;)for(var p,d=c(arguments[l++]),v=h?r(d).concat(h(d)):r(d),y=v.length,m=0;y>m;)p=v[m++],i&&!f.call(d,p)||(n[p]=d[p]);return n}:u},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=i=function(t){return n(t)}:t.exports=i=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},i(e)}t.exports=i},function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,i)}t.exports=n},function(t,e,n){var i=n(6),r=n(63),o=n(11),s=n(46),a=n(64);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,i=o(t),c=s.f,u=r(i),l={},h=0;u.length>h;)void 0!==(n=c(i,e=u[h++]))&&a(l,e,n);return l}})},function(t,e,n){var i=n(34),r=n(24),o=n(8),s=n(0).Reflect;t.exports=s&&s.ownKeys||function(t){var e=i.f(o(t)),n=r.f;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";var i=n(3),r=n(16);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){"use strict";var i=n(0),r=n(10),o=n(1),s=n(6),a=n(12),c=n(66).KEY,u=n(9),l=n(21),h=n(35),f=n(17),p=n(4),d=n(47),v=n(67),y=n(68),m=n(69),g=n(8),b=n(15),x=n(18),w=n(11),S=n(29),O=n(16),k=n(48),j=n(72),E=n(46),A=n(24),M=n(3),T=n(13),L=E.f,C=M.f,P=j.f,_=i.Symbol,D=i.JSON,N=D&&D.stringify,R=p("_hidden"),F=p("toPrimitive"),q={}.propertyIsEnumerable,W=l("symbol-registry"),I=l("symbols"),z=l("op-symbols"),V=Object.prototype,G="function"==typeof _&&!!A.f,Y=i.QObject,B=!Y||!Y.prototype||!Y.prototype.findChild,X=o&&u((function(){return 7!=k(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=L(V,e);i&&delete V[e],C(t,e,n),i&&t!==V&&C(V,e,i)}:C,H=function(t){var e=I[t]=k(_.prototype);return e._k=t,e},J=G&&"symbol"==typeof _.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof _},K=function(t,e,n){return t===V&&K(z,e,n),g(t),e=S(e,!0),g(n),r(I,e)?(n.enumerable?(r(t,R)&&t[R][e]&&(t[R][e]=!1),n=k(n,{enumerable:O(0,!1)})):(r(t,R)||C(t,R,O(1,{})),t[R][e]=!0),X(t,e,n)):C(t,e,n)},U=function(t,e){g(t);for(var n,i=y(e=w(e)),r=0,o=i.length;o>r;)K(t,n=i[r++],e[n]);return t},Q=function(t){var e=q.call(this,t=S(t,!0));return!(this===V&&r(I,t)&&!r(z,t))&&(!(e||!r(this,t)||!r(I,t)||r(this,R)&&this[R][t])||e)},Z=function(t,e){if(t=w(t),e=S(e,!0),t!==V||!r(I,e)||r(z,e)){var n=L(t,e);return!n||!r(I,e)||r(t,R)&&t[R][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=P(w(t)),i=[],o=0;n.length>o;)r(I,e=n[o++])||e==R||e==c||i.push(e);return i},tt=function(t){for(var e,n=t===V,i=P(n?z:w(t)),o=[],s=0;i.length>s;)!r(I,e=i[s++])||n&&!r(V,e)||o.push(I[e]);return o};G||(a((_=function(){if(this instanceof _)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(z,n),r(this,R)&&r(this[R],t)&&(this[R][t]=!1),X(this,t,O(1,n))};return o&&B&&X(V,t,{configurable:!0,set:e}),H(t)}).prototype,"toString",(function(){return this._k})),E.f=Z,M.f=K,n(34).f=j.f=$,n(25).f=Q,A.f=tt,o&&!n(22)&&a(V,"propertyIsEnumerable",Q,!0),d.f=function(t){return H(p(t))}),s(s.G+s.W+s.F*!G,{Symbol:_});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var it=T(p.store),rt=0;it.length>rt;)v(it[rt++]);s(s.S+s.F*!G,"Symbol",{for:function(t){return r(W,t+="")?W[t]:W[t]=_(t)},keyFor:function(t){if(!J(t))throw TypeError(t+" is not a symbol!");for(var e in W)if(W[e]===t)return e},useSetter:function(){B=!0},useSimple:function(){B=!1}}),s(s.S+s.F*!G,"Object",{create:function(t,e){return void 0===e?k(t):U(k(t),e)},defineProperty:K,defineProperties:U,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:tt});var ot=u((function(){A.f(1)}));s(s.S+s.F*ot,"Object",{getOwnPropertySymbols:function(t){return A.f(x(t))}}),D&&s(s.S+s.F*(!G||u((function(){var t=_();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(b(e)||void 0!==t)&&!J(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!J(e))return e}),i[1]=e,N.apply(D,i)}}),_.prototype[F]||n(7)(_.prototype,F,_.prototype.valueOf),h(_,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e,n){var i=n(17)("meta"),r=n(15),o=n(10),s=n(3).f,a=0,c=Object.isExtensible||function(){return!0},u=!n(9)((function(){return c(Object.preventExtensions({}))})),l=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[i].i},getWeak:function(t,e){if(!o(t,i)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[i].w},onFreeze:function(t){return u&&h.NEED&&c(t)&&!o(t,i)&&l(t),t}}},function(t,e,n){var i=n(0),r=n(14),o=n(22),s=n(47),a=n(3).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,n){var i=n(13),r=n(24),o=n(25);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var s,a=n(t),c=o.f,u=0;a.length>u;)c.call(t,s=a[u++])&&e.push(s);return e}},function(t,e,n){var i=n(30);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(3),r=n(8),o=n(13);t.exports=n(1)?Object.defineProperties:function(t,e){r(t);for(var n,s=o(e),a=s.length,c=0;a>c;)i.f(t,n=s[c++],e[n]);return t}},function(t,e,n){var i=n(0).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(11),r=n(34).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(i(t))}},function(t,e,n){var i=n(3).f,r=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in r||n(1)&&i(r,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){for(var i=n(49),r=n(13),o=n(12),s=n(0),a=n(7),c=n(36),u=n(4),l=u("iterator"),h=u("toStringTag"),f=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=r(p),v=0;v<d.length;v++){var y,m=d[v],g=p[m],b=s[m],x=b&&b.prototype;if(x&&(x[l]||a(x,l,f),x[h]||a(x,h,m),c[m]=f,g))for(y in i)x[y]||o(x,y,i[y],!0)}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i=n(22),r=n(6),o=n(12),s=n(7),a=n(36),c=n(77),u=n(35),l=n(78),h=n(4)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,v,y,m){c(n,e,d);var g,b,x,w=function(t){if(!f&&t in j)return j[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",O="values"==v,k=!1,j=t.prototype,E=j[h]||j["@@iterator"]||v&&j[v],A=E||w(v),M=v?O?w("entries"):A:void 0,T="Array"==e&&j.entries||E;if(T&&(x=l(T.call(new t)))!==Object.prototype&&x.next&&(u(x,S,!0),i||"function"==typeof x[h]||s(x,h,p)),O&&E&&"values"!==E.name&&(k=!0,A=function(){return E.call(this)}),i&&!m||!f&&!k&&j[h]||s(j,h,A),a[e]=A,a[S]=p,v)if(g={values:O?A:w("values"),keys:y?A:w("keys"),entries:M},m)for(b in g)b in j||o(j,b,g[b]);else r(r.P+r.F*(f||k),e,g);return g}},function(t,e,n){"use strict";var i=n(48),r=n(16),o=n(35),s={};n(7)(s,n(4)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(10),r=n(18),o=n(32)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var i=n(18),r=n(13);n(80)("keys",(function(){return function(t){return r(i(t))}}))},function(t,e,n){var i=n(6),r=n(14),o=n(9);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*o((function(){n(1)})),"Object",s)}},function(t,e,n){"use strict";n(82);var i=n(8),r=n(50),o=n(1),s=/./.toString,a=function(t){n(12)(RegExp.prototype,"toString",t,!0)};n(9)((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?a((function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)})):"toString"!=s.name&&a((function(){return s.call(this)}))},function(t,e,n){n(1)&&"g"!=/./g.flags&&n(3).f(RegExp.prototype,"flags",{configurable:!0,get:n(50)})},function(t,e,n){"use strict";var i=n(84),r={};r[n(4)("toStringTag")]="z",r+""!="[object z]"&&n(12)(Object.prototype,"toString",(function(){return"[object "+i(this)+"]"}),!0)},function(t,e,n){var i=n(30),r=n(4)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var i=n(6);i(i.P,"Array",{fill:n(86)}),n(31)("fill")},function(t,e,n){"use strict";var i=n(18),r=n(44),o=n(42);t.exports=function(t){for(var e=i(this),n=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,n),c=s>2?arguments[2]:void 0,u=void 0===c?n:r(c,n);u>a;)e[a++]=t;return e}},function(t,e,n){"use strict";n.r(e);var i=n(51),r=n.n(i),o=(n(20),n(23),n(2)),s=n.n(o),a=n(5),c=n.n(a),u=n(26),l=n.n(u),h=n(27),f=n.n(h),p=n(19),d=n.n(p),v=n(28),y=n.n(v),m=function(){function t(e,n){s()(this,t),this.x=e,this.y=n}return c()(t,[{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.lengthSq())}},{key:"fromArray",value:function(t){return this.x=t[0],this.y=t[1],this}},{key:"toArray",value:function(){return[this.x,this.y]}},{key:"radians",value:function(){return Math.atan2(this.y,this.x)}},{key:"radiansVector",value:function(t){return Math.atan2(this.y-t.y,this.x-t.x)}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}}]),t}(),g=function(){function t(e){s()(this,t),this.type=e.type||"",this.artists=e.artists||[],this.visible=!1!==e.visible||e.visible,this.hitNum=1,this.opacity=1,this.p=e.p||new m(0,0),this.v=e.v||new m(0,0)}return c()(t,[{key:"update",value:function(){this.v.x*=.95,this.v.y*=.95,this.p.add(this.v)}},{key:"draw",value:function(t){var e=this;Array.isArray(this.artists)&&this.visible&&this.artists.forEach((function(n){t.save(),t.globalAlpha=e.opacity,n.draw.call(e,t),t.restore()}))}}]),t}(),b=function(t){function e(t){var n;return s()(this,e),(n=l()(this,f()(e).call(this,t))).r=10,n.textPos="top",n.text="",n.fillStyle="green",n.strokeStyle="#ccc",n.textStyle="#666",Object.assign(d()(n),t),n}return y()(e,t),e}(g),x=function(t){function e(t){var n;return s()(this,e),(n=l()(this,f()(e).call(this,t))).r=10,n.strokeStyle="#ccc",n.lineWidth=3,n.start=new m(0,0),n.end=new m(0,0),Object.assign(d()(n),t),n}return y()(e,t),c()(e,[{key:"getVecByRR",value:function(t,e){var n=e*Math.cos(t)+this.start.x,i=e*Math.sin(t)+this.start.y;return new m(n,i)}}]),e}(g);window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,17)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout);var w={onMouse:null,mouseListener:null,captureMouse:function(t){var e={x:0,y:0,event:null},n=document.body.scrollLeft,i=document.documentElement.scrollLeft,r=document.body.scrollTop,o=document.documentElement.scrollTop,s=t.offsetLeft,a=t.offsetTop;return w.mouseListener=function(t){var c,u;t.offsetX?(c=t.offsetX,u=t.offsetY):(t.pageX||t.pageY?(c=t.pageX,u=t.pageY):(c=t.clientX+n+i,u=t.clientY+r+o),c-=s,u-=a),e.x=c,e.y=u,e.event=t},t.addEventListener("mousemove",w.mouseListener,!1),e},removeCaptureMouse:function(t){t.removeEventListener("mousemove",w.mouseListener,!1)},captureTouch:function(t){var e={x:null,y:null,isPressed:!1,event:null},n=document.body.scrollLeft,i=document.documentElement.scrollLeft,r=document.body.scrollTop,o=document.documentElement.scrollTop,s=t.offsetLeft,a=t.offsetTop;return t.addEventListener("touchstart",(function(t){e.isPressed=!0,e.event=t}),!1),t.addEventListener("touchend",(function(t){e.isPressed=!1,e.x=null,e.y=null,e.event=t}),!1),t.addEventListener("touchmove",(function(t){var c,u,l=t.touches[0];l.pageX||l.pageY?(c=l.pageX,u=l.pageY):(c=l.clientX+n+i,u=l.clientY+r+o),c-=s,u-=a,e.x=c,e.y=u,e.event=t}),!1),e},listenerWindowResize:function(t){window.addEventListener("resize",t,!1)},removeListenerWindowResize:function(t){window.removeEventListener("resize",t,!1)}},S=w,O=(n(62),n(65),n(73),n(52)),k=n.n(O);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(n,!0).forEach((function(e){k()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(74),n(49),n(79),n(81),n(83);var A=["ttb","btt"];function M(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"".concat(t()+t(),"-").concat(t(),"-").concat(t(),"-").concat(t(),"-").concat(t()).concat(t()).concat(t())}function T(t){var e,n,i,r,o,s,a,c=t.canvasData,u=t.cavDataMap,l=t.canvas,h=t.direction,f=t.containerStyle,p=t.cavDataLevelArr,d=l.width,v=l.height,y=c.sprites,g=f.padding;e=(v-2*g)/p.length,n=(d-2*g)/p.length;for(var b=0;b<y.length;b++)"edge"!==(i=y[b]).type&&(r=u[i.father],o=0,s=0,"tree"===i.father&&(a="btt"===h||"ttb"===h?new m(d/2,0):new m(0,v/2),r=t.createNode({p:a,v:new m(0,0),_uuid:"tree",_level:-1,children:["root"],widthRatio:1}),A.includes(h)?(u.root.p.x=d/2,u.root.p.y=0):(u.root.p.x=0,u.root.p.y=v/2),u.root.widthRatio=1),A.includes(h)?o=r.p.x-d*r.widthRatio/2+d*i.widthRatio*(i.which+.5):s=r.p.y-v*r.widthRatio/2+v*i.widthRatio*(i.which+.5),"btt"===h?s=v-i._level*e-g-i.r:"ttb"===h?s=i._level*e+g+i.r:"ltr"===h?o=i._level*n+g+i.r:"rtl"===h&&(o=d-i._level*n-g-i.r),i.p.x=o,i.p.y=s)}function L(t){var e={};return t.forEach((function(t){"node"===t.type&&(e[t.father]||(e[t.father]=[]),e[t.father].push(t))})),e}var C=["ttb","btt"];function P(t,e,n,i){e.dx=t.p.x-e.p.x,e.dy=t.p.y-e.p.y,e.dist=Math.sqrt(e.dx*e.dx+e.dy*e.dy),e.dist<e.r||(e.angle=Math.atan2(e.dy,e.dx),e.f=1/e.dist,C.includes(n)?e.v.x=Math.cos(e.angle)*e.dist*.01*(i||1):e.v.y=Math.sin(e.angle)*e.dist*.01*(i||1),e.update())}function _(t,e,n,i){t.dx=t.p.x-e.p.x,t.dy=t.p.y-e.p.y,t.dist=Math.sqrt(t.dx*t.dx+t.dy*t.dy),t.isHit=t.dist<=n,C.includes(i)?t.stopMove=Math.abs(t.v.x)<.01:t.stopMove=Math.abs(t.v.y)<.01,t.isHit&&(t.angle=Math.atan2(t.dy,t.dx),t.dist=t.dist<1?1:t.dist,t.f=t.r/t.dist,C.includes(i)?t.v.x=Math.cos(t.angle)*t.f*2:t.v.y=Math.sin(t.angle)*t.f*2)}n(85);var D=["ttb","btt"],N=["ttb","btt"],R=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s()(this,t),this.canvas=e,this.context=this.canvas.getContext("2d"),this.canvasData=null,this.cavDataMap={},this.cavDataLevelArr=[],this.drawNodes=[],this.requestAnimationID,this.currentLevel,this.cellspacing=n.cellspacing||3,this.totalFrames=0,this.maxFrames=5e4,this.animate=void 0===n.animate||n.animate,this.containerStyle=Object.assign({},{padding:40},n.containerStyle||{}),this.direction=n.direction||"ttb",this.edge=Object.assign({type:"edge",lineWidth:1},n.edge),this.node=Object.assign({textPos:"top",textDir:"",lineWidth:1,font:"15px Arial",fillStyle:"green",strokeStyle:"green",textStyle:"#666",radius:10},n.node),this.listener=Object.assign({},n.listener),this.artists=Object.assign({},n.artists),this.animationFrameAfter=n.animationFrameAfter,this.hitNode=this.createNode({p:new m(0,0),v:new m(0,0),r:this.node.radius}),this.createCopyCanvas(),this.setCanvasStyle(n.width||500,n.height||500)}return c()(t,[{key:"edgeArtists",value:function(){if("function"==typeof this.artists.edgeArtists)return this.artists.edgeArtists();var t=this.direction;return"curve"===this.edge.mode?function(t){return[{draw:function(e){var n=D.includes(t)?Math.abs((this.end.y-this.start.y)/2):Math.abs((this.end.x-this.start.x)/2);this.end.radiansVector(this.start),e.save(),e.beginPath(),"btt"===t?(e.moveTo(this.start.x,this.start.y+this.r),e.bezierCurveTo(this.start.x,Math.floor(this.start.y-n),this.end.x,Math.floor(this.end.y+n),this.end.x,this.end.y)):"ttb"===t?(e.moveTo(this.start.x,this.start.y+this.r),e.bezierCurveTo(this.start.x,Math.floor(this.start.y+n),this.end.x,Math.floor(this.end.y-n),this.end.x,this.end.y-this.r)):"ltr"===t?(e.moveTo(this.start.x+this.r,this.start.y),e.bezierCurveTo(Math.floor(this.start.x+n),this.start.y,Math.floor(this.end.x-n),this.end.y,this.end.x,this.end.y)):"rtl"===t&&(e.moveTo(this.start.x-this.r,this.start.y),e.bezierCurveTo(Math.floor(this.start.x-n),this.start.y,Math.floor(this.start.x-n),this.end.y,this.end.x,this.end.y)),e.strokeStyle=this.strokeStyle,e.lineWidth=this.lineWidth,e.lineCap="round",e.stroke(),e.restore()}}]}(t):"polyline"===this.edge.mode?function(t){return[{draw:function(e){var n=D.includes(t)?Math.abs((this.end.y-this.start.y)/3):Math.abs((this.end.x-this.start.x)/3);this.end.radiansVector(this.start),e.save(),e.beginPath(),"btt"===t?(e.moveTo(this.start.x,this.start.y+this.r),e.lineTo(this.start.x,Math.floor(this.start.y-n)),e.lineTo(this.end.x,Math.floor(this.end.y+n)),e.lineTo(this.end.x,this.end.y)):"ttb"===t?(e.moveTo(this.start.x,this.start.y+this.r),e.lineTo(this.start.x,Math.floor(this.start.y+n)),e.lineTo(this.end.x,Math.floor(this.end.y-n)),e.lineTo(this.end.x,this.end.y-this.r)):"ltr"===t?(e.moveTo(this.start.x+this.r,this.start.y),e.lineTo(Math.floor(this.start.x+n),this.start.y),e.lineTo(Math.floor(this.end.x-n),this.end.y),e.lineTo(this.end.x,this.end.y)):"rtl"===t&&(e.moveTo(this.start.x-this.r,this.start.y),e.lineTo(Math.floor(this.start.x-n),this.start.y),e.lineTo(Math.floor(this.end.x+n),this.end.y),e.lineTo(this.end.x,this.end.y)),e.strokeStyle=this.strokeStyle,e.lineWidth=this.lineWidth,e.lineCap="round",e.stroke(),e.restore()}}]}(t):[{draw:function(t){var e=this.end.distanceTo(this.start)-this.r,n=this.end.radiansVector(this.start),i=this.getVecByRR(n,e),r=this.getVecByRR(n,this.r);t.save(),t.beginPath(),t.lineCap="round",t.strokeStyle=this.strokeStyle,t.lineWidth=this.lineWidth,t.moveTo(r.x,r.y),t.lineTo(i.x,i.y),t.stroke(),t.restore()}},{draw:function(t){var e=this.end.distanceTo(this.start)-this.r,n=this.end.radiansVector(this.start),i=this.getVecByRR(n,e);t.save(),t.translate(i.x,i.y),t.rotate(n),t.beginPath(),t.lineCap="round",t.fillStyle=this.strokeStyle,t.strokeStyle=this.strokeStyle,t.lineWidth=1,t.moveTo(0,0),t.lineTo(-8,4),t.lineTo(-8,-4),t.closePath(),t.stroke(),t.fill(),t.restore()}}]}},{key:"nodeArtists",value:function(){return"function"==typeof this.artists.nodeArtists?this.artists.nodeArtists():[{draw:function(t){t.save(),t.translate(this.p.x,this.p.y),t.beginPath(),t.fillStyle=this.fillStyle,t.lineWidth=this.lineWidth,t.strokeStyle=this.strokeStyle||this.fillStyle,t.arc(0,0,this.r,0,2*Math.PI,!0),t.fill(),t.stroke(),t.restore()}},{draw:function(t){var e=this.textPos,n=this.p,i=n.x,r=n.y;"top"===e?(t.textAlign="center",r-=this.r+10):"bottom"===e?(t.textAlign="center",r+=2*this.r+10):"left"===e?(i-=this.r+10,t.textAlign="right"):"right"===e?(i+=this.r+10,t.textAlign="left"):"center"===e?t.textAlign="center":(t.textAlign="center",r-=this.r+10),t.save(),t.translate(i,r),t.font=this.font,t.textBaseline="middle",t.fillStyle=this.textStyle,t.fillText(this.text,0,0),t.restore()}}]}},{key:"createLine",value:function(t){return new x(t)}},{key:"createNode",value:function(t){return new b(t)}},{key:"createCopyCanvas",value:function(){this.copyCanvas=document.createElement("canvas"),this.copyCanvas.id="copyCanvas",this.copyCanvas.style.position="absolute",this.copyCanvas.style.top="-9999999px",this.copyContext=this.copyCanvas.getContext("2d"),document.querySelector("body").appendChild(this.copyCanvas)}},{key:"addCollisionObjs",value:function(t){this.collisions=[].concat(t)}},{key:"hitTest",value:function(t,e){try{var n=t.getImageData(e.x,e.y,1,1).data[3]>1}catch(t){if(!DisplayObject.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n}},{key:"onMouseEvent",value:function(t){var e=this;"click"===t.type?this.listener.click&&this.listener.click(this.hitObject):"contextmenu"===t.type?this.listener.contextmenu&&this.listener.contextmenu(this.hitObject):"dblclick"===t.type?this.listener.dblclick&&this.listener.dblclick(this.hitObject):"mousedown"===t.type&&this.hitObject?this.listener.mousedown&&this.listener.mousedown(this.hitObject):"mouseup"===t.type?this.listener.mouseup&&this.listener.mouseup(this.hitObject):"mousemove"===t.type&&this.mouseTest((function(t){t?(e.hitObject=t,e.canvas.style.cursor="pointer"):(e.canvas.style.cursor="auto",e.hitObject=null),e.listener.mousemove&&e.listener.mousemove(e.hitObject)}))}},{key:"addEventListener",value:function(t){this.listener=Object.assign({},t),this.mouse=S.captureMouse(this.canvas),this.dispatchEvent=this.onMouseEvent.bind(this),this.canvas.addEventListener("mousedown",this.dispatchEvent,!1),this.canvas.addEventListener("mouseup",this.dispatchEvent,!1),this.canvas.addEventListener("mousemove",this.dispatchEvent,!1),this.canvas.addEventListener("click",this.dispatchEvent,!1),this.canvas.addEventListener("dblclick",this.dispatchEvent,!1),this.canvas.addEventListener("contextmenu",this.dispatchEvent,!1)}},{key:"removeEventListener",value:function(){S.removeCaptureMouse(this.canvas),this.canvas.removeEventListener("mousedown",this.dispatchEvent,!1),this.canvas.removeEventListener("mouseup",this.dispatchEvent,!1),this.canvas.removeEventListener("mousemove",this.dispatchEvent,!1),this.canvas.removeEventListener("click",this.dispatchEvent,!1),this.canvas.removeEventListener("dblclick",this.dispatchEvent,!1),this.canvas.removeEventListener("contextmenu",this.dispatchEvent,!1)}},{key:"removeDom",value:function(){this.canvas.parentNode.removeChild(this.canvas),this.canvas&&(this.canvas=null),this.copyCanvas.parentNode.removeChild(this.copyCanvas),this.copyCanvas&&(this.copyCanvas=null)}},{key:"setCanvasStyle",value:function(t,e){this.copyCanvas.height=this.canvas.height=e,this.copyCanvas.width=this.canvas.width=t}},{key:"emptyData",value:function(){this.collisions=null,this.canvasData=null,this.cavDataMap=null,this.cavDataLevelArr=null,this.drawNodes=null}},{key:"clear",value:function(t,e,n){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.copyContext.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"mouseTest",value:function(t){for(var e=this.copyContext,n=this.collisions.length;n;){var i=this.collisions[n-1];this.clear(e,this.copyCanvas.width,this.copyCanvas.height);var r=void 0;i.draw(e),this.hitTest(e,this.mouse)&&(r=i,n=1),t(r),--n}}},{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setCanvasStyle(t.width||500,t.height||500)}},{key:"transformData",value:function(t){var e,n,i,r=function(t){var e=[],n=[],i=0,r=Object.assign({father:"tree",widthRatio:1,which:0,_level:0,_uuid:"root"},t);n.push(r);for(var o,s=null,a=null,c=[];i!=n.length;)if(s=n[i++],c=[],(a=Array.isArray(s.children)?s.children.length:0)>0){for(var u=0;u<a;u++)o=Object.assign({father:s._uuid,widthRatio:s.widthRatio/a,which:u,_level:s._level+1,_uuid:M()},s.children[u]),n.push(o),c.push(o._uuid);n[i-1].children=c}for(var l=0;l<n.length;l++)e[l]=n[l];return e}(t),o=(e=r,n={},Array.isArray(e)&&e.forEach((function(t){n[t._uuid]=t})),n);this.canvasData=function(t,e,n,i,r){for(var o,s,a=[],c=[],u=null,l=0,h=e.length;l<h;l++)u=e[l],o=u.x||0,s=u.y||0,a.push(t.createNode(E({artists:t.nodeArtists(),p:A.includes(t.direction)?new m(250+1*l,s):new m(o,250+1*l),v:new m(0,0),r:i.radius||10,text:u.name,type:"node"},i,{},u,{data:u,fillStyle:u.fillStyle||i.fillStyle,strokeStyle:u.strokeStyle||i.strokeStyle}))),u.children&&u.children.length&&u.children.forEach((function(e){var a=n[e];a&&c.push(t.createLine(E({artists:t.edgeArtists(),start:new m(o,s),end:new m(a.x||0,a.y||0),r:i.radius,type:"edge",edge:[u._uuid,a._uuid]},r)))}));return{sprites:c.concat(a),collisionObjs:a}}(this,r,o,this.node,this.edge),this.cavDataMap=function(t){var e={};return t.forEach((function(t){e[t._uuid]=t})),e}(this.canvasData.sprites),this.cavDataLevelArr=function(t){var e=[];return t.forEach((function(t){isNaN(t._level)||(e[t._level]||(e[t._level]=[]),e[t._level].push(t))})),e}(this.canvasData.sprites),T(this),this.drawEdges=(i=this.canvasData.sprites,Array.isArray(i)?i.filter((function(t){return"edge"===t.type})):[]),this.addCollisionObjs(this.canvasData.collisionObjs),this.drawNodes=this.getDrawNodes()}},{key:"iterateLevelArr",value:function(){for(var t,e,n,i=this.cavDataLevelArr,r=(this.drawNodes,this.cavDataMap),o=this.direction,s=this.hitNode,a=0,c=i.length;a<c;a++)for(var u in this.currentLevel=a,t=L(i[a]))if(Array.isArray(t[u])){if(!(e=r[u]))continue;n=null,N.includes(o)?(1==t[u].length?n=t[u][0].p.x:t[u].length>1&&(n=(t[u][0].p.x+t[u][e.children.length-1].p.x)/2),n&&e.p.x!==n&&e.stopMove&&(s.p.x=n,s.p.y=e.p.y,P(s,e,this.direction))):(1==t[u].length?n=t[u][0].p.y:t[u].length>1&&(n=(t[u][0].p.y+t[u][e.children.length-1].p.y)/2),n&&e.p.y!==n&&e.stopMove&&(s.p.y=n,s.p.x=e.p.x,P(s,e))),e.update()}}},{key:"updateEdgesPos",value:function(){this.drawNodes;var t,e,n=this.cavDataMap;this.drawEdges.forEach((function(i){var o=r()(i.edge,2);t=o[0],e=o[1],i.start.x=n[t].p.x,i.start.y=n[t].p.y,i.end.x=n[e].p.x,i.end.y=n[e].p.y}))}},{key:"drawSprite",value:function(t){var e=this;t.forEach((function(t){t.draw(e.context)}))}},{key:"getAllNodeSumV",value:function(){var t=0;return this.drawNodes.forEach((function(e){t+=e.v.x})),t}},{key:"makeWallCell",value:function(){var t=this.containerStyle.padding,e=this.node.radius,n=this.createNode({name:"top",p:new m(0,t),v:new m(0,0),r:e}),i=this.createNode({name:"left",p:new m(t,0),v:new m(0,0),r:e}),r=this.createNode({name:"bottom",p:new m(0,this.canvas.height+t),v:new m(0,0),r:e}),o=this.createNode({name:"right",p:new m(this.canvas.height-t,0),v:new m(0,0),r:e});this.walls={top:n,left:i,bottom:r,right:o}}},{key:"getDrawNodes",value:function(){for(var t=[],e=0,n=this.cavDataLevelArr.length;e<n;e++)this.cavDataLevelArr[e].forEach((function(e){"node"!=e.type||t.includes(e)||t.push(e)}));return t}},{key:"setChildren",value:function(){for(var t,e,n,i=0,r=this.drawNodes.length;i<r;i++)if((t=this.drawNodes[i]).isSetChildren=!1,Array.isArray(t.children))for(var o=0,s=t.children.length;o<s;o++)e=t.children[o],n=this.cavDataMap[e],this.hitNode.p.x=t.p.x,this.hitNode.p.y=t.p.y,N.includes(this.direction)?this.hitNode.p.y=n.p.y:this.hitNode.p.x=n.p.x,n.stopMove&&!t.stopMove&&(t.isSetChildren=!0,P(this.hitNode,n,this.direction))}},{key:"loop",value:function(){var t,e,n,i;this.clear(),i=this.direction,this.cavDataLevelArr.forEach((function(r){for(var o=0,s=r.length;o<s-1;o++){for(t=o,n=o+1;n<s;n++)A.includes(i)?r[n].p.x<r[t].p.x&&(t=n):r[n].p.y<r[t].p.y&&(t=n);e=r[o].p,r[o].p=r[t].p,r[t].p=e}})),this.drawNodes,this.context,this.cavDataMap,window.sun||(window.sun=1),window.sun++,function(t){var e,n,i,r,o=t.drawNodes,s=t.context,a=(t.cavDataMap,t.direction),c=t.cellspacing,u=(t.hitNode,o.length);for(function(t){var e=t.drawNodes,n=(t.cavDataMap,t.canvas),i=(t.direction,t.containerStyle),r=t.walls,o=(r.top,r.left,r.bottom,r.right,i.padding),s=n.width,a=n.height;e.forEach((function(t){t.p.x>=s-o&&(t.p.x=s-o-2),t.p.x<=o&&(t.p.x=o+2),t.p.y>=a-o&&(t.p.y=a-o-2),t.p.y<=o&&(t.p.y=o+2)}))}(t),i=0;i<u;i++){for(e=o[i],r=0;r<u;r++)o[r].isHit=!1,r!=i&&_(n=o[r],e,(n.r+e.r)*c,a);e.update(),e.draw(s)}}(this),this.setChildren(),this.iterateLevelArr(),this.updateEdgesPos(),this.drawSprite(this.drawEdges),"function"==typeof this.animationFrameAfter&&this.animationFrameAfter(),this.requestAnimationID=requestAnimationFrame(this.loop.bind(this))}},{key:"stopRequestAnimation",value:function(){this.requestAnimationID&&(cancelAnimationFrame(this.requestAnimationID),this.requestAnimationID=null)}},{key:"resize",value:function(t,e){this.stopRequestAnimation(),this.clear(),this.setCanvasStyle(t,e),this.makeWallCell(),T(this,this.canvasData.sprites,this.cavDataMap,this.canvas.width),this.loop()}},{key:"load",value:function(t){this.stopRequestAnimation(),this.clear(),this.transformData(t),this.makeWallCell(),this.loop()}},{key:"destroy",value:function(){this.emptyData(),this.stopRequestAnimation(),this.removeEventListener(),this.removeDom()}}]),t}();e.default={app:R,eventUtils:S}}]).default}));